<div class="projection-chart-container">
  <!-- Header Section -->
  <div class="chart-header">
    <div class="header-left">
      <div class="title-wrapper">
        <i class="fa-solid fa-chart-line title-icon"></i>
        <h3 class="chart-title">Defect vs Running Hours Projection</h3>
      </div>
      <p class="chart-subtitle">Predictive maintenance analytics for equipment lifecycle</p>
    </div>
    
    <div class="filter-controls">
      <div class="control-group">
        <label class="control-label">
          <i class="fa-solid fa-ship"></i>
          Ship
        </label>
        <p-dropdown 
          [options]="shipOptions" 
          [(ngModel)]="selectedShip" 
          placeholder="Select Ship"
          optionLabel="label" 
          optionValue="value"
          (onChange)="onShipChange($event)"
          styleClass="modern-dropdown"
        ></p-dropdown>
      </div>

      <div class="control-group">
        <label class="control-label">
          <i class="fa-solid fa-gear"></i>
          Equipment
        </label>
        <p-dropdown 
          [options]="equipmentOptions" 
          [(ngModel)]="selectedEquipment" 
          placeholder="Select Equipment"
          optionLabel="label" 
          optionValue="value"
          (onChange)="onEquipmentChange($event)"
          styleClass="modern-dropdown"
        ></p-dropdown>
      </div>

      <div class="control-group">
        <label class="control-label">
          <i class="fa-solid fa-brain"></i>
          Model
        </label>
        <p-dropdown 
          [options]="projectionOptions" 
          [(ngModel)]="selectedProjection" 
          placeholder="Select Model"
          optionLabel="label" 
          optionValue="value"
          (onChange)="onProjectionChange($event)"
          styleClass="modern-dropdown"
          [disabled]="!apiResponse || projectionOptions.length === 0"
        ></p-dropdown>
      </div>
    </div>
  </div>
  
  <!-- Chart Body -->
  <div class="chart-body">
    <div *ngIf="loading" class="loading-state">
      <div class="spinner"></div>
      <p class="loading-text">Loading projection data...</p>
    </div>
    
    <div *ngIf="errorMessage && !loading" class="error-state">
      <i class="fa-solid fa-triangle-exclamation error-icon"></i>
      <p class="error-text">{{ errorMessage }}</p>
    </div>
    
    <div *ngIf="chartData && !loading" class="chart-wrapper">
      <p-chart
        type="line"
        [data]="chartData"
        [options]="chartOptions"
        class="projection-chart"
      ></p-chart>
    </div>
    
    <div *ngIf="!chartData && !loading && !errorMessage" class="empty-state">
      <i class="fa-solid fa-chart-line empty-icon"></i>
      <p class="empty-text">No projection data available</p>
      <p class="empty-subtext">Select a ship and equipment to view projections</p>
    </div>
  </div>
</div>
